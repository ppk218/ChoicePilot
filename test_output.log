Using API URL: https://851dd399-9392-40e2-b795-96773954385d.preview.emergentagent.com/api

================================================================================
Running test: Hybrid Follow-up System
================================================================================
Testing hybrid AI-led follow-up system...
Testing hybrid follow-up system - initial step
First question: What factors matter most to you?
Nudge: e.g., time, money, relationships, career growth
Persona: pragmatist

Testing hybrid follow-up system - first followup step
Second question: What constraints are you working with?
Nudge: e.g., budget limits, deadlines, location
Persona: realist

Testing hybrid follow-up system - second followup step
Error: No followup questions in third response
❌ Test FAILED: Hybrid Follow-up System

================================================================================
Running test: Smart Classification System
================================================================================
Testing smart classification and persona-based follow-up system...

Testing Simple question: 'What phone should I buy?'
Persona found in follow-up question: realist
Decision type: structured
First followup question: What specific features do you need most in a new phone?
Nudge: For example, is camera quality or battery life more important to you?

Testing followup step

Testing recommendation step
Successfully received recommendation with confidence score: 70
Models used: claude, gpt4o-simulated
Frameworks used: Fallback Analysis
Personas consulted: 

Testing Medium complexity question: 'Should I switch careers to data science?'
Persona found in follow-up question: realist
Decision type: mixed
First followup question: What specific skills do you currently have that could translate to data science roles?
Nudge: Think about programming, analysis, or statistics you might already know.

Testing followup step

Testing recommendation step
Successfully received recommendation with confidence score: 70
Models used: claude, gpt4o-simulated
Frameworks used: Fallback Analysis
Personas consulted: 

Testing High complexity question: 'Should I leave my marriage?'
Persona found in follow-up question: supportive
Decision type: intuitive
First followup question: What emotions are driving this decision?
Nudge: e.g., fear, excitement, uncertainty, hope

Testing followup step

Testing recommendation step
Successfully received recommendation with confidence score: 70
Models used: claude, gpt4o-simulated
Frameworks used: Fallback Analysis
Personas consulted: 
✅ Test PASSED: Smart Classification System

================================================================================
Running test: Anonymous Smart Classification
================================================================================
Testing smart classification with anonymous user...
Testing anonymous advanced decision with medium complexity question
Anonymous advanced decision created with ID: 9c902130-4616-4844-bc50-7c9e51266835
Decision type: mixed
Persona found in follow-up question: realist
First followup question: What specific skills do you need to acquire for a successful transition to data science?
Nudge: Consider data analysis, programming, or machine learning skills needed for job openings.

Testing anonymous followup step

Testing anonymous recommendation step
Successfully received anonymous recommendation with confidence score: 82
Models used: claude, gpt4o-simulated
Frameworks used: Emotional Alignment, Risk Mitigation, Gradual Testing, Multi-Persona Synthesis, Skills Transfer Analysis
Personas consulted: realist, visionary, pragmatist, supportive
✅ Test PASSED: Anonymous Smart Classification

================================================================================
Running test: Email Validation
================================================================================
Testing email validation...
✓ Success: Invalid email 'abc123' was rejected with status 422
✓ Success: Invalid email 'user@' was rejected with status 422
✓ Success: Invalid email '@domain.com' was rejected with status 422
✓ Success: Invalid email 'user@domain' was rejected with status 422
✓ Success: Invalid email 'user.domain.com' was rejected with status 422
✓ Success: Invalid email 'user@.com' was rejected with status 422
✓ Success: Invalid email 'user@domain..com' was rejected with status 422
✓ Success: Valid email 'valid_429376d7@example.com' was accepted
✅ Test PASSED: Email Validation

================================================================================
Running test: Name Validation
================================================================================
Testing name validation...
✓ Success: Invalid name '123456' was rejected with status 400
✓ Success: Invalid name 'User123' was rejected with status 400
✓ Success: Invalid name '!@#$%^' was rejected with status 400
✓ Success: Invalid name 'User!' was rejected with status 400
✓ Success: Invalid name '' was rejected with status 400
✓ Success: Valid name 'John Smith' was accepted
✅ Test PASSED: Name Validation

================================================================================
Running test: Password Requirements
================================================================================
Testing password requirements...
✓ Success: Invalid password 'short' was rejected with status 400
✓ Success: Invalid password 'password' was rejected with status 400
✓ Success: Invalid password 'PASSWORD' was rejected with status 400
✓ Success: Invalid password 'Password' was rejected with status 400
✓ Success: Invalid password 'Password1' was rejected with status 400
✓ Success: Invalid password 'password!' was rejected with status 400
✓ Success: Invalid password 'PASSWORD1' was rejected with status 400
✓ Success: Invalid password 'Pass!' was rejected with status 400
✓ Success: Valid password 'TestPassword123!' was accepted
✅ Test PASSED: Password Requirements

================================================================================
Running test: Authenticated Decision Flow
================================================================================
Testing authenticated decision flow...
Testing authenticated decision flow - initial step
Authenticated decision flow created with ID: 842162c0-2b2c-49f2-967e-0c78ed49d89f
Followup question: What specific aspects of this job opportunity are most important to you - salary, career growth, work-life balance, or company culture?
✅ Test PASSED: Authenticated Decision Flow

================================================================================
Running test: Anonymous Decision Flow
================================================================================
Testing anonymous decision flow...
Testing anonymous decision flow - initial step
Anonymous decision flow created with ID: 80ea3d0e-ec8f-4afa-a0da-589caedb87bd
Followup question: What programming languages and development environments will you primarily be using, and do you have any preference for macOS vs Windows/Linux?

Testing anonymous decision flow - followup step
Second followup question: What programming languages and ML frameworks do you primarily use, and do you prefer macOS or Windows/Linux for development?
✅ Test PASSED: Anonymous Decision Flow

================================================================================
Running test: Decision Feedback
================================================================================
Testing decision feedback endpoint...
Creating a decision for feedback testing
Created decision with ID: ae46230a-1430-4588-837c-a90cb9684057

Testing decision feedback - positive
Positive feedback submitted successfully: Feedback submitted successfully

Testing decision feedback - negative with text
Negative feedback submitted successfully: Feedback submitted successfully

Testing decision feedback - invalid (missing helpful field)
Invalid feedback correctly returns 400 Bad Request
✅ Test PASSED: Decision Feedback

================================================================================
Running test: Core Authentication
================================================================================
Testing core authentication endpoints...
Successfully registered user: test_064d5d51@example.com
Successfully logged in test user: test_064d5d51@example.com
Successfully logged in user: test_064d5d51@example.com
Successfully retrieved user info: test_064d5d51@example.com
Successfully verified decision ID format: 9aa95981-3d9c-44ba-94a5-b0fbda5dcbae
✅ Test PASSED: Core Authentication

================================================================================
Running test: Decision Types
================================================================================
Testing different decision types...

Testing career decision type
Successfully created career decision with ID: 8330946e-2be9-4154-b4cc-cde89d8aea2b
Followup question: What specific aspects of your current marketing role are making you consider leaving, and what attracts you most about software development?

Testing purchase decision type
Successfully created purchase decision with ID: 32c255cb-e243-4ca7-b25b-8487b2a402a5
Followup question: What specific tasks or software are you struggling with on your current laptop that's prompting this decision?

Testing relocation decision type
Successfully created relocation decision with ID: 633763be-9ad9-4aaf-ac37-ef850522d492
Followup question: What's your current living situation and how important are factors like cost of living, weather, and distance from family to you?

Testing general decision type
Successfully created general decision with ID: 0628b7e8-5856-4d3d-b853-228a3f7b7bbf
Followup question: What type of music do you most enjoy listening to, and do you have any specific songs or artists that inspire you?
✅ Test PASSED: Decision Types

================================================================================
Running test: Advanced Decision Endpoint - Authenticated
================================================================================
Testing advanced decision endpoint with authenticated user...
Testing advanced decision - structured question
Decision type: structured
Advanced decision created with ID: de33d352-a90f-4f8f-b2bc-7b9a83fa06f7
First followup question: What specific features do you rely on most for daily use?
Nudge: For instance, is a great camera or battery life your priority?

Testing advanced decision - followup step

Testing advanced decision - recommendation step
Successfully received recommendation with confidence score: 85
Models used: claude, gpt4o-simulated
Frameworks used: Ecosystem Analysis, Switching Cost Assessment, Feature Prioritization, Multi-Persona Synthesis, Hands-on Testing
Next steps: ['List all your current Apple devices and services to assess ecosystem lock-in strength', "Visit a store and spend 30 minutes exploring Samsung's customization features you're interested in", 'Compare total cost including accessories, cases, and potential app repurchases if switching']

Testing advanced decision - intuitive question
Decision type: intuitive

Testing advanced decision - mixed question
Decision type: mixed
✅ Test PASSED: Advanced Decision Endpoint - Authenticated

================================================================================
Running test: Advanced Decision Endpoint - Anonymous
================================================================================
Testing advanced decision endpoint with anonymous user...
Testing anonymous advanced decision - structured question
Anonymous advanced decision created with ID: 059d8a6d-b595-4044-8045-cac072bef8ab
Decision type: structured

Testing anonymous advanced decision - followup step

Testing anonymous advanced decision - recommendation step
Successfully received recommendation with confidence score: 82
Models used: claude, gpt4o-simulated
Frameworks used: Use Case Alignment, Professional ROI Analysis, Workflow Optimization, Long-term Value Assessment
Next steps: ['Research specific MacBook Pro configurations for your video editing needs (32GB RAM minimum for 4K work)', 'Test both machines hands-on at an Apple Store and Best Buy to feel the keyboard, trackpad, and screen quality differences', 'Set a realistic budget timeline - if money is tight, consider certified refurbished MacBook Pro or waiting for educational discounts']
✅ Test PASSED: Advanced Decision Endpoint - Anonymous

================================================================================
Test Summary
================================================================================
Total tests: 13
Passed: 12
Failed: 1
Success rate: 92.3%

Detailed Results:
❌ Hybrid Follow-up System: FAILED
✅ Smart Classification System: PASSED
✅ Anonymous Smart Classification: PASSED
✅ Email Validation: PASSED
✅ Name Validation: PASSED
✅ Password Requirements: PASSED
✅ Authenticated Decision Flow: PASSED
✅ Anonymous Decision Flow: PASSED
✅ Decision Feedback: PASSED
✅ Core Authentication: PASSED
✅ Decision Types: PASSED
✅ Advanced Decision Endpoint - Authenticated: PASSED
✅ Advanced Decision Endpoint - Anonymous: PASSED
